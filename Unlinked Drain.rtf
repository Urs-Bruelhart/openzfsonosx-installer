{\rtf1\ansi\ansicpg1252\cocoartf1187\cocoasubrtf400
{\fonttbl\f0\fnil\fcharset0 LucidaGrande;\f1\fswiss\fcharset0 Helvetica;\f2\fnil\fcharset0 Menlo-Regular;
}
{\colortbl;\red255\green255\blue255;\red38\green38\blue38;}
\margl1440\margr1440\vieww14200\viewh15380\viewkind0
\deftab720
\pard\pardeftab720\ri720\sl276\slmult1

\f0\b\fs24 \cf0 Unlinked Drain
\f1\b0 \
\
Please note that the following does NOT apply to users coming from 1.3.1-RC5.\
\
Previous versions of O3X (1.3.0 and earlier) never processed the unlinked-drain list. We now have support for this, but this means the very first import will finally process the unlinked-drain list. This can take quite a while.\
\
You can watch the /var/log/system.log file for progress.\
\
For example,\
\pard\pardeftab720\ri720\sl276\slmult1

\f2 \cf2  tail -f /var/log/system.log | grep ZFS\
\pard\pardeftab720\ri720\sl276\slmult1

\f1 \cf0 \
It is possible for this to take several hours depending on your particular pool.\
\
What is the unlinked drain list? Quoting lundman from the forum,\
\
	Unlinked-drain is connected to deleting things, especially at times when \
	we cannot directly free the space associated with the file, or more often, \
	the xattr. All xattrs, and sometimes files, are then placed on the unlinked-\
	drain list. Next mount time, ZFS runs through the list and calls the actual \
	remove function. \
\
	Early versions of O3X placed all deleted xattr on the list, and some \
	deleted files in certain cases, were placed on the list, but never processed. \
	So the list would be ever growing. Since it is xattrs and metadata of files, it \
	isn't about the diskspace.\
\
	Now, file deletion is properly implemented with fastpath, so unlinked-\
	drain is not used as much, and we also finally process the list on mount. \
	Alas, it can be rather large. More so on OS X since OS X uses xattrs \
	much more than other platforms.}